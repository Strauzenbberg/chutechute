<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üî¢ Adivinhe o N√∫mero</title>

  <style>
    /* Temas (equivalente ao :global(.light/.dark) do Svelte) */
    .light {
      --bg: #ffffff;
      --fg: #222222;
      --primary: #6200ee;
      --button-bg: var(--primary);
      --button-color: #ffffff;
      --muted: #555;
      --card: #f7f7f7;
      --border: #e0e0e0;
    }
    .dark {
      --bg: #121212;
      --fg: #eeeeee;
      --primary: #bb86fc;
      --button-bg: var(--primary);
      --button-color: #000000;
      --muted: #bdbdbd;
      --card: #1a1a1a;
      --border: #2a2a2a;
    }

    /* Layout geral (equivalente ao :global(body) e estilos do <main>) */
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: var(--bg);
      color: var(--fg);
    }
    main {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
      padding: 2rem;
      box-sizing: border-box;
      max-width: 720px;
      margin: 0 auto;
    }

    .topbar {
      width: 100%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    h1 { margin: 0.5rem 0 0; }

    .card {
      width: 100%;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      box-sizing: border-box;
    }

    label { display: inline-block; margin-right: .5rem; }

    select, input {
      font-size: 1rem;
      padding: 0.5rem 0.6rem;
      margin: 0.5rem 0;
      border: 1px solid var(--fg);
      border-radius: 6px;
      background: var(--bg);
      color: var(--fg);
      outline: none;
    }

    input[type="number"] { width: 200px; }

    button {
      margin: 0.5rem 0.25rem;
      padding: 0.6rem 1.0rem;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      background: var(--button-bg);
      color: var(--button-color);
      cursor: pointer;
      transition: transform .06s ease, filter .12s ease;
    }
    button:hover { filter: brightness(1.05); }
    button:active { transform: translateY(1px); }

    .mensagem {
      margin-top: 1rem;
      font-size: 1.2rem;
      min-height: 1.5em;
    }

    .muted { color: var(--muted); }

    .row { display: flex; align-items: center; gap: .5rem; flex-wrap: wrap; }

    /* Suave ‚Äúfade-in‚Äù para trocar √°reas (substitui in:fade do Svelte) */
    .fade {
      opacity: 0;
      transform: translateY(4px);
      animation: fadeIn .25s ease forwards;
    }
    @keyframes fadeIn {
      to { opacity: 1; transform: translateY(0); }
    }
    .hidden { display: none !important; }
  </style>
</head>

<body class="light">
  <main>
    <div class="topbar">
      <div class="row">
        <label for="difficulty">Dificuldade:</label>
        <select id="difficulty">
          <option value="easy">F√°cil (1‚Äì50)</option>
          <option value="medium" selected>M√©dio (1‚Äì100)</option>
          <option value="hard">Dif√≠cil (1‚Äì200)</option>
        </select>
      </div>
      <button id="btnTheme">‚òÄÔ∏è Light</button>
    </div>

    <h1 class="fade">üî¢ Adivinhe o N√∫mero</h1>
    <p id="rangeInfo" class="fade muted">Escolha um n√∫mero entre 1 e 100</p>

    <div class="card">
      <div id="gameArea" class="fade">
        <input
          id="palpite"
          type="number"
          min="1"
          max="100"
          placeholder="Seu palpite"
          aria-label="Digite um n√∫mero"
        />
        <button id="btnVerificar">Verificar</button>
      </div>

      <div id="againArea" class="fade hidden">
        <button id="btnReiniciar">Jogar Novamente</button>
      </div>

      <div id="mensagem" class="mensagem fade"></div>

      <div id="recorde" class="fade muted" style="margin-top:1rem; display:none;">
        üèÜ Melhor recorde: <span id="bestScoreText"></span> tentativa(s)
      </div>
    </div>
  </main>

  <script>
    // --- Utilidades de armazenamento seguro ---
    function isLocalStorageAvailable() {
      try {
        const k = '__storage_test__';
        window.localStorage.setItem(k, k);
        window.localStorage.removeItem(k);
        return true;
      } catch {
        return false;
      }
    }
    const hasLocalStorage = isLocalStorageAvailable();
    const getStorageItem = (key) => hasLocalStorage ? window.localStorage.getItem(key) : null;
    const setStorageItem = (key, value) => { if (hasLocalStorage) window.localStorage.setItem(key, value); };

    // --- Configura√ß√µes de dificuldade ---
    const difficulties = [
      { label: 'F√°cil (1‚Äì50)',   value: 'easy',   max: 50  },
      { label: 'M√©dio (1‚Äì100)',  value: 'medium', max: 100 },
      { label: 'Dif√≠cil (1‚Äì200)', value: 'hard',   max: 200 }
    ];

    // --- Estado do tema ---
    let theme = getStorageItem('theme') || 'light';
    function applyTheme() {
      document.body.classList.remove('light', 'dark');
      document.body.classList.add(theme);
      btnTheme.textContent = theme === 'dark' ? 'üåô Dark' : '‚òÄÔ∏è Light';
    }
    function toggleTheme() {
      theme = theme === 'light' ? 'dark' : 'light';
      setStorageItem('theme', theme);
      applyTheme();
    }

    // --- Estado do jogo ---
    let difficulty = 'medium';
    let maxNumber  = 100;
    let numeroSecreto;
    let tentativas = 0;
    let jogoFinalizado = false;
    let bestScore = parseInt(getStorageItem('bestScore'), 10) || null;

    // --- Refer√™ncias do DOM ---
    const selectDifficulty = document.getElementById('difficulty');
    const btnTheme = document.getElementById('btnTheme');
    const rangeInfo = document.getElementById('rangeInfo');
    const palpiteEl = document.getElementById('palpite');
    const btnVerificar = document.getElementById('btnVerificar');
    const btnReiniciar = document.getElementById('btnReiniciar');
    const gameArea = document.getElementById('gameArea');
    const againArea = document.getElementById('againArea');
    const mensagemEl = document.getElementById('mensagem');
    const recordeEl = document.getElementById('recorde');
    const bestScoreText = document.getElementById('bestScoreText');

    function pickMaxByDifficulty(value) {
      const cfg = difficulties.find(d => d.value === value) || difficulties[1];
      return cfg.max;
    }

    function startGame() {
      maxNumber = pickMaxByDifficulty(difficulty);
      numeroSecreto = Math.floor(Math.random() * maxNumber) + 1;
      tentativas = 0;
      jogoFinalizado = false;
      mensagemEl.textContent = '';
      palpiteEl.value = '';
      palpiteEl.min = '1';
      palpiteEl.max = String(maxNumber);
      rangeInfo.textContent = `Escolha um n√∫mero entre 1 e ${maxNumber}`;
      gameArea.classList.remove('hidden');
      againArea.classList.add('hidden');
      palpiteEl.focus();
    }

    function atualizarRecordeUI() {
      if (bestScore && Number.isFinite(bestScore)) {
        bestScoreText.textContent = bestScore;
        recordeEl.style.display = '';
      } else {
        recordeEl.style.display = 'none';
      }
    }

    function verificarPalpite() {
      const num = parseInt(palpiteEl.value, 10);
      if (!num || num < 1 || num > maxNumber) {
        mensagemEl.textContent = `Insira um n√∫mero entre 1 e ${maxNumber}.`;
        return;
      }

      tentativas++;
      if (num === numeroSecreto) {
        mensagemEl.textContent = `üéâ Acertou em ${tentativas} tentativa(s)!`;
        jogoFinalizado = true;

        if (!bestScore || tentativas < bestScore) {
          bestScore = tentativas;
          setStorageItem('bestScore', String(bestScore));
          atualizarRecordeUI();
        }

        gameArea.classList.add('hidden');
        againArea.classList.remove('hidden');
      } else if (num < numeroSecreto) {
        mensagemEl.textContent = 'üîº Muito baixo!';
      } else {
        mensagemEl.textContent = 'üîΩ Muito alto!';
      }
    }

    function reiniciarJogo() {
      startGame();
    }

    // --- Eventos ---
    btnTheme.addEventListener('click', toggleTheme);
    selectDifficulty.addEventListener('change', () => {
      difficulty = selectDifficulty.value;
      startGame();
    });
    btnVerificar.addEventListener('click', verificarPalpite);
    btnReiniciar.addEventListener('click', reiniciarJogo);
    palpiteEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') verificarPalpite();
    });

    // --- Inicializa√ß√£o (equivalente ao onMount do Svelte) ---
    document.addEventListener('DOMContentLoaded', () => {
      // Aplica tema salvo e seleciona dificuldade padr√£o
      applyTheme();
      selectDifficulty.value = difficulty;
      atualizarRecordeUI();
      startGame();
    });
  </script>
  <script>
(function () {
  var NAMESPACE = 'meu-portfolio';
var KEY = location.pathname; // usa o caminho da URL como identificador

  function render(n) {
    var id = 'visit-counter-badge';
    var el = document.getElementById(id);
    if (!el) {
      el = document.createElement('div');
      el.id = id;
      el.style.cssText = 'position:fixed;bottom:12px;right:12px;background:rgba(0,0,0,0.4);color:#fff;padding:6px 10px;border-radius:999px;font:12px/1.2 system-ui,Arial,sans-serif;backdrop-filter:blur(4px);box-shadow:0 2px 8px rgba(0,0,0,.15);z-index:2147483647';
      document.body.appendChild(el);
    }
    el.textContent = 'Visitas: ' + n;
  }

  var url = 'https://api.countapi.xyz/hit/' +
            encodeURIComponent(NAMESPACE) + '/' +
            encodeURIComponent(KEY);

  fetch(url).then(r => r.json()).then(d => {
    render(d && typeof d.value === 'number' ? d.value : 0);
  }).catch(() => {
    var k = 'vc_' + NAMESPACE + '_' + KEY;
    var n = +(localStorage.getItem(k) || 0) + 1;
    localStorage.setItem(k, n);
    render(n);
  });
})();
</script>

</body>
</html>

